# ES20 P2 submission, Group 36

## Feature TDP

### Subgroup
 - Jo√£o Achando, 90615, joaoachando
   + Issues assigned: [#184](https://github.com/tecnico-softeng/es20tg_36-project/issues/184), [#185](https://github.com/tecnico-softeng/es20tg_36-project/issues/185),
                      [#187](https://github.com/tecnico-softeng/es20tg_36-project/issues/187), [#194](https://github.com/tecnico-softeng/es20tg_36-project/issues/194),
                      [#195](https://github.com/tecnico-softeng/es20tg_36-project/issues/195), [#202](https://github.com/tecnico-softeng/es20tg_36-project/issues/202),
                      [#204](https://github.com/tecnico-softeng/es20tg_36-project/issues/204), [#205](https://github.com/tecnico-softeng/es20tg_36-project/issues/205),
                      [#206](https://github.com/tecnico-softeng/es20tg_36-project/issues/206), [#218](https://github.com/tecnico-softeng/es20tg_36-project/issues/218),
                      [#219](https://github.com/tecnico-softeng/es20tg_36-project/issues/219), [#220](https://github.com/tecnico-softeng/es20tg_36-project/issues/220),
                        
 - Miguel Franco, 90625, miguelrnf
   + Issues assigned: [#182](https://github.com/tecnico-softeng/es20tg_36-project/issues/182), [#189](https://github.com/tecnico-softeng/es20tg_36-project/issues/189),
                      [#183](https://github.com/tecnico-softeng/es20tg_36-project/issues/183), [#184](https://github.com/tecnico-softeng/es20tg_36-project/issues/184),
                      [#186](https://github.com/tecnico-softeng/es20tg_36-project/issues/186), [#191](https://github.com/tecnico-softeng/es20tg_36-project/issues/191),
                      [#192](https://github.com/tecnico-softeng/es20tg_36-project/issues/192), [#193](https://github.com/tecnico-softeng/es20tg_36-project/issues/193),
                      [#200](https://github.com/tecnico-softeng/es20tg_36-project/issues/200), [#203](https://github.com/tecnico-softeng/es20tg_36-project/issues/203),
                      [#207](https://github.com/tecnico-softeng/es20tg_36-project/issues/207), [#208](https://github.com/tecnico-softeng/es20tg_36-project/issues/209),
                      
### Pull requests associated with this feature

The list of pull requests associated with this feature is:

 - [PR #224](https://github.com/tecnico-softeng/es20tg_36-project/pull/224)
 - [PR #225](https://github.com/tecnico-softeng/es20tg_36-project/pull/225)
 - [PR #226](https://github.com/tecnico-softeng/es20tg_36-project/pull/226)
 - [PR #227](https://github.com/tecnico-softeng/es20tg_36-project/pull/227)
 

### Web services definition

#### Controllers
 - [TournamentController](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/src/main/java/pt/ulisboa/tecnico/socialsoftware/tutor/tournament/api/TournamentController.java)

### Feature testing
The direct links to these are:

 - ReadingTestJMeter:
    - [Get Opened Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetOpenedTournamentTest.jmx) 
    - [Get Tournament](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetTournamentTest.jmx)
    - [Get Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetTournamentsTest.jmx)
 
 - WritingTestsJMeter:
     - [Enroll Students](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/Test%20Web%20EnrollStudent.jmx)
     - [Create Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/Test%20Web%20Service%20createTournamentTest.jmx)
     - [Unenroll Students](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSUnrollStudentTest.jmx)


#### Screenshots of Results Trees and DB cleanup
- Create Tournament
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Feature/body.png)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Feature/cleanup.png)

- Enroll Student
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Feature/body.png)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Feature/cleanup.png)

- Unenroll Student
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Feature/body.jpeg)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Feature/cleanup.jpeg)

- Get Opened Tournaments
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Feature/body.jpeg)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Feature/cleanup.jpeg)

- Get Tournaments
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Feature/body.jpeg)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Feature/cleanup.jpeg)

- Get Tournament
![Response body](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournament/Feature/body.jpeg)
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournament/Feature/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournament/Feature/cleanup.jpeg)


### Load testing

Each subgroup member defined one reading test and one writing test. The direct links to these are:

 - ReadingTestJMeter:
     - [Get Opened Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetOpenedTournamentLoadTest.jmx) 
     - [Get Tournament](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetTournamentLoadTest.jmx)
     - [Get Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSGetTournamentsLoadTest.jmx)
  
 - WritingTestsJMeter:
     - [Enroll Students](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSEnrollStudentLoadTest.jmx)
     - [Create Tournaments](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSCreateTournamentLoadTest.jmx)
     - [Unenroll Students](https://github.com/tecnico-softeng/es20tg_36-project/blob/TdP-Tournament/dev/backend/jmeter/tournament/WSUnrollStudentLoadTest.jmx)


#### Screenshots of Summary Reports and DB cleanup

- Create Tournament
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Load/cleanup.png)

- Enroll Student
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Load/cleanup.png)

- Unenroll Student
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Load/cleanup.jpeg)

- Get Opened Tournaments
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Load/cleanup.jpeg)

- Get Tournaments
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Load/cleanup.jpeg)

- Get Tournament
![Summary report](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournament/Load/report.jpeg)
![DB Cleanup](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournament/Load/cleanup.jpeg)


### Service profiling

We used the [Async Profiler](https://www.jetbrains.com/help/idea/async-profiler.html).

#### Screenshots of summary reports

- Create Tournament
![Profiling graphs](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Profiling/vm.png)
![Profiling percentages](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Profiling/profiling.jpeg)
![Profiling heap](http://web.tecnico.ulisboa.pt/~joaoachando/ES/CreateTournament/Profiling/memory.png)

- Enroll Student
![Profiling graphs](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Profiling/vm.png)
![Profiling percentages](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Profiling/profiling.png)
![Profiling heap](http://web.tecnico.ulisboa.pt/~joaoachando/ES/EnrollStudent/Profiling/memory.png)

- Unenroll Student
![Profiling graphs](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Profiling/vm.jpeg)
![Profiling percentages](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Profiling/profiling.jpeg)
![Profiling heap](http://web.tecnico.ulisboa.pt/~joaoachando/ES/SignOut/Profiling/memory.jpeg)

- Get Opened Tournaments
![Profiling graphs](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Profiling/vm.jpeg)
![Profiling percentages](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Profiling/profiling.jpeg)
![Profiling heap](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetOpenedTournaments/Profiling/memory.jpeg)

- Get Tournaments
![Profiling graphs](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Profiling/vm.jpeg)
![Profiling percentages](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Profiling/profiling.jpeg)
![Profiling heap](http://web.tecnico.ulisboa.pt/~joaoachando/ES/GetTournaments/Profiling/memory.jpeg)

#### Discussion of findings

From the profiling test we found out that our service is well optimized, the only thing slowing it down is hibernate 
(findAll(), findByUsername(), findById(), ...). These functions make queries to our database, and unfortunately 
we can't optimize them.   


